
doctype html
- var isDev = env !== 'production'
html
  head
    meta(charset='UTF-8')
    meta(http-equiv='x-ua-compatible' content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1, shrink-to-fit=no')
    title #{siteName}
    style.
      #content-loading {
        position: fixed;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: #141314 50% 50% no-repeat url("./images/electerm-watermark.png")
      }
    style(id='less-css').
    link(rel='stylesheet', href='css/electerm.styles.css?' + version)
    link(rel='stylesheet', href='css/basic.styles.css?' + version)
    style(id='theme-css').
  body
    #container
    #content-loading
    script.
      window.et = !{JSON.stringify(_global)}
    script(src='../node_modules/lodash/lodash.min.js')
    - if (isDev)
      script(src='../node_modules/react/umd/react.development.js?' + version)
      script(src='../node_modules/react-dom/umd/react-dom.development.js?' + version)
    - else
      script(src='./external/react.production.min.js?' + version)
      script(src='./external/react-dom.production.min.js?' + version)
    script.
      window.et.onload = function() {
        document.body.removeChild(document.getElementById('content-loading'));
      };
      window.lang = window.pre.getGlobalSync('lang')

      function capitalizeFirstLetter (string) {
        return string.charAt(0).toUpperCase() + string.slice(1)
      }
      window._config = window.pre.getGlobalSync('_config')
      window.prefix = prefix => {
        if (window._config.language === 'en_us') {
          return (id) => {
            return capitalizeFirstLetter(window.lang[prefix][id] || id)
          }
        }
        return (id) => {
          return window.lang[prefix][id] || id
        }
      }
    script(src='js/electerm.' + version + '.js', onload='window.et.onload()')
